<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">

   <!-- TODO: Change title -->
    <title>Midterm Project</title>

    <!-- Load Bulma from CDN (consider saving it to repository instead) -->
    <!-- https://bulma.io/ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
    
    <!-- TODO: include stylesheets -->
    <link href="bubbleplot/style.css" rel="stylesheet" type="text/css">

    <!-- Load Font Awesome 5 (free) icons -->
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
  </head>

  <body>

    <!-- Page header -->
    <!-- https://bulma.io/documentation/layout/hero/ -->
    <section class="hero is-primary is-bold">
      <div class="hero-body">
        <div class="container">
          <!-- TODO: Change title -->
          <h1 class="title">MidTerm Project</h1>
          <!-- TODO: Change subtitle -->
          <h2 class="subtitle">SF Fire Department Calls for Service DataSet Analysis</h2>
        </div>
      </div>
    </section>
    <!-- End page header -->

    <!-- Page navigation -->
    <!-- https://bulma.io/documentation/components/navbar/ -->
  <nav class="navbar is-light" role="navigation" aria-label="main navigation">
    <div class="container">
      <div class="navbar-brand">
        <!-- TODO: Change link to repository homepage if needed -->
        <!-- TODO: Change which navbar-item is-active if needed -->
        <a class="navbar-item" href="index.html">
          <span class="icon"><i class="fas fa-home"></i></span>
          <span>Home</span>
        </a>

        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="main-menu">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="main-menu" class="navbar-menu has-text-weight-medium">
        <!-- Left navbar items -->
        <div class="navbar-start">
          <a class="navbar-item" href="data.html" title="Data">
            <span class="icon"><i class="fas fa-table"></i></span>
            <span>Data</span>
          </a>

          <!-- TODO: Modify or remove dropdown -->
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link is-active">
              <span class="icon"><img src="https://img.icons8.com/android/24/000000/scatter-plot.png" style="width: 15px;"></span>
            <span>Visualization</span>
            </a>

            <div class="navbar-dropdown">
              <a class="navbar-item" href="prototype1.html">
                <span class="icon"><i class="fas fa-chart-bar"></i></span>
                <span>Interactive Bar Chart</span>
              </a>
              <a class="navbar-item is-active" href="prototype2.html">
                <span class="icon"><i class="fas fa-chart-area"></i></span>
                <span>Small Multiples Bubble Chart</span>
              </a>


              <a class="navbar-item" href="prototype3.html">
                <span class="icon"><i class="fas fa-chart-pie"></i></span>
                <span>Prototype 3</span>
              </a>
            </div>
          </div>
        </div>

        <!-- Right navbar items -->
        <div class="navbar-end">
          <!-- TODO: Update as needed -->

          <a class="navbar-item" href="acknowledgement.html" title="About">
            <span class="icon"><i class="fas fa-info-circle"></i></span>
            <span>Acknowledgement</span>
          </a>

          <a class="navbar-item" href="about.html" title="About">
            <span class="icon"><i class="fas fa-info-circle"></i></span>
            <span>About</span>
          </a>
        </div>
      </div>
    </div>
  </nav>
    <!-- End page navigation -->

    <section class="section">
      <div class="container">
        <!-- Begin page content -->
        <div class="content">
            <h1 id="home" class="title">
                <!-- TODO: Change page title -->
                Prototype 2 - Average Number of Incidents across different Batallions and Stations
              </h1>
    
              <h5>Nikhil Bhutani</h5>

          <h4>Wrangling specific to prototype</h4>
          <pre style="font-size: 14px; font-family: Dank Mono Regular;">
    Filtered By: Batallion not "B99", Year 2019, Station Area not null, Call Type Group not null and City is "San Francisco"
    Grouping By: Batallion, Station Area, Call Type Group
    Aggregated By: Average Incident Number(count of incidents for each month for a battalion and station / no. of months per year(12))(rounded to 2 decimal places)
            </pre>

          <h4>Tableau Prototype(Beta Release)</h4>
          <img src="midterm_prototype_2.png" alt="prototype2" width="960" height="500">
          
          <h4> Tableau Prototype(Final Release)</h4>
          <img src="midterm_prototype_2_final.png" alt="prototype2" width="960" height="500">
          
          <h4> D3 Implementation</h4>
          <section id="d3ImplementationSection" class="section">
              <div class="container content">
                <h2 style="font-weight: normal">Average number of incidents across different batallions and stations for Year 2019 and San Francisco city</h2>
                <!-- TODO: include html elements -->
                <svg id="main-svg"></svg>
                <svg id="legend-svg" style="position: absolute;"></svg>

                <p>Nikhil Bhutani</p>
                <p>Source:
                  <ul>
                    <li>
                      <a href="https://data.sfgov.org/Public-Safety/Fire-Department-Calls-for-Service/nuek-vuh3/data" target="_blank">https://data.sfgov.org/Public-Safety/Fire-Department-Calls-for-Service/nuek-vuh3/data</a>
                    </li>
                    <li>
                      <a href="https://sf-fire.org/fire-station-locations" target="_blank">https://sf-fire.org/fire-station-locations</a>
                    </li>
                  </ul>
                </p>
              </div>
        </section>

        <!-- include d3.js v5 -->
        <script src="https://d3js.org/d3.v5.min.js"></script>

        <!-- include d3.js modules -->
        <script src="https://d3js.org/d3-array.v2.min.js"></script>

        <!-- include d3-legend: https://d3-legend.susielu.com/ -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js" integrity="sha256-qo76Vs9B6JAALbrTn+PcN1r09hbNLd2M78V19glOMeU=" crossorigin="anonymous"></script>

        <script src="bubbleplot/bubble.js"></script>

          <h4>Peer Review Feedback</h4>
          <ul>
            <li>The use of size to encode type of call is confusing. It seems to encode the number of calls, but is not. 
              Also the use of a paired color scheme gives the impression that some battalions are related. Also it is hard to understand which neighborhood each station serves.</li>
            <li>Having so many colors gets a bit overwhelming and makes it a bit difficult to properly see the data. The number of incidents also can be reliant on population for the neighborhood that battalion serves, so maybe a ratio would be better for lie factor rather than raw count. The labels included don't seem to add much to the visualization right now. 
              Otherwise, this is a good visualization and can be improved with some tweaks and interactivity.</li>
            <li>I think making Call Type displayed by circle size is a little confusing. Also Station numbers kind of lack information/content like location.</li>
            <li>data density if very high, data-ink ratio high.</li>
            <li>A reccomendation I have for this one is to have the ability to filter by batallion so that we can see a less crowded version and make conclusions on the data separately.</li>
            <li>differentiating call type group by size is difficult. There are a lot of overlapping bubbles near the bubble which might make it difficult to fond some data. the interactivity for it might solve that problem though.</li>
            <li>there is a lot of colors and a lot of overlapping data. I think when working on interactivity remember this. Could be smart to use foreground vs background to show all data points with interactivity. For the labels under the values not totally sure if necessary because you have the legend already. Otherwise good job, look forward to seeing what the finish product comes out to.</li>
           </ul>
          
          <h4> Data Encoding and Interpretation</h4>
          <p>Battalion vs Station Numbers. Colour shows different call type groups. The size shows the incident number count. The x axis(vertical axis) is represented by station numbers and y axis(horizontal axis) is represented by batallions.</p>
          <p>The bigger circle size means that there are more number of incidents reported in that respective batallion and its corresponding station.</p>
          
          <h4>Conclusion based on the prototype</h4>
          <p>For year 2019, most active batallion is "B02" and station is "36" with most number of incidents and the incidents are of type "Potentionally Life-Threatening".</p>

          <h4>Interactivity for the Visualization</h4>
          <p>Following interactivities has been implemented for the visualization:</p>
          <ul>
            <li>Highlighting all the circles related to a particular battalion accross different call type groups if one of the circle of a batallion is hovered on i.e. 
            fading all of the circles belonging to other batallions.</li>
            <li>On demand data display i.e. when a user hovers on a circle then a tool tip pops up with specific details of the data. The details includes batallion, station number
            , station area, and call type group it belongs to.</li>
          </ul>

          <h4>How this visualization supports the theme?</h4>
          <p>Visualization helps in analysing the most active/busiest batallion and station and what type of incidents do they receive the most.</p>
          
          <h4>Inspiration</h4>
          <ul>
            <li><a href="https://gist.github.com/sjengle/22051097a8090fa227cbd80cdc2bad03" target="_blank">Mobility Rate by College Bubble Chart By Sophie Engle</a></li>
            <li><a href="https://observablehq.com/@sjengle/interactivity?collection=@sjengle/interactive-scatterplot" target="_blank">Interactive Scatter Plot By Sophie Engle</a></li>
          </ul>

        </div>
      <!-- End page content -->
    </div>
  </section>

  <!-- Page footer -->
  <!-- https://bulma.io/documentation/layout/footer/ -->
  <footer class="footer">
    <div class="content has-text-centered is-size-7" >
      <p>
        <a href="#top">
          <span class="fas fa-arrow-up"></span>
          <span class="has-text-weight-medium">Back to Top</span>
        </a>
      </p>

      <p>
        <!-- TODO: Change to link to your Github repository -->
        <a href="https://github.com/usf-cs360-spring2020/midterm-dataviz" target="_blank" class="button is-small" style="padding-left: 1em; padding-right: 1em;">
          <i class="fab fa-github-alt"></i>&nbsp;<strong>Github</strong>
        </a>

        <a href="https://fontawesome.com/" class="button is-small" style="padding-left: 1em; padding-right: 1em;">
          <i class="fab fa-font-awesome"></i>&nbsp;<strong>FontAwesome</strong>
        </a>

        <a href="https://bulma.io" class="button is-small">
          <img src="https://bulma.io/images/made-with-bulma--semiblack.png" alt="Made with Bulma" width="128" height="24">
        </a>
      </p>
    </div>
  </footer>
  <!-- End page footer -->

  <!-- Mobile menu responsiveness -->
  <!-- https://bulma.io/documentation/components/navbar/ -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

    if ($navbarBurgers.length > 0) {
      $navbarBurgers.forEach( el => {
        el.addEventListener('click', () => {
          const target = el.dataset.target;
          const $target = document.getElementById(target);
          el.classList.toggle('is-active');
          $target.classList.toggle('is-active');
        });
      });
    }
  });
  </script>
  <!-- End mobile menu responsiveness -->
  </body>

</html>
