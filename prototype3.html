<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="prototype3styles.css">

   <!-- TODO: Change title -->
    <title>Midterm Project</title>

    <!-- Load Bulma from CDN (consider saving it to repository instead) -->
    <!-- https://bulma.io/ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">

    <!-- Load Font Awesome 5 (free) icons -->
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
  </head>

  <body>

    <!-- Page header -->
    <!-- https://bulma.io/documentation/layout/hero/ -->
    <section class="hero is-primary is-bold">
      <div class="hero-body">
        <div class="container">
          <!-- TODO: Change title -->
          <h1 class="title">MidTerm Project</h1>
          <!-- TODO: Change subtitle -->
          <h2 class="subtitle">SF Fire Department Calls for Service DataSet Analysis</h2>
        </div>
      </div>
    </section>
    <!-- End page header -->

    <!-- Page navigation -->
    <!-- https://bulma.io/documentation/components/navbar/ -->
  <nav class="navbar is-light" role="navigation" aria-label="main navigation">
    <div class="container">
      <div class="navbar-brand">
        <!-- TODO: Change link to repository homepage if needed -->
        <!-- TODO: Change which navbar-item is-active if needed -->
        <a class="navbar-item" href="index.html">
          <span class="icon"><i class="fas fa-home"></i></span>
          <span>Home</span>
        </a>

        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="main-menu">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="main-menu" class="navbar-menu has-text-weight-medium">
        <!-- Left navbar items -->
        <div class="navbar-start">
          <a class="navbar-item" href="data.html" title="Data">
            <span class="icon"><i class="fas fa-table"></i></span>
            <span>Data</span>
          </a>

          <!-- TODO: Modify or remove dropdown -->
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link is-active">
              <span class="icon"><img src="https://img.icons8.com/android/24/000000/scatter-plot.png" style="width: 15px;"></span>
            <span>Visualization</span>
            </a>

            <div class="navbar-dropdown">
              <a class="navbar-item" href="prototype1.html">
                <span class="icon"><i class="fas fa-chart-bar"></i></span>
                <span>Interactive Bar Chart</span>
              </a>
              <a class="navbar-item" href="prototype2.html">
                <span class="icon"><i class="fas fa-chart-area"></i></span>
                <span>Small Multiples Bubble Chart</span>
              </a>


              <a class="navbar-item is-active" href="prototype3.html">
                <span class="icon"><i class="fas fa-chart-pie"></i></span>
                <span>Prototype 3</span>
              </a>
            </div>
          </div>
        </div>

        <!-- Right navbar items -->
        <div class="navbar-end">
          <!-- TODO: Update as needed -->

          <a class="navbar-item" href="acknowledgement.html" title="About">
            <span class="icon"><i class="fas fa-info-circle"></i></span>
            <span>Acknowledgement</span>
          </a>

          <a class="navbar-item" href="about.html" title="About">
            <span class="icon"><i class="fas fa-info-circle"></i></span>
            <span>About</span>
          </a>
        </div>
      </div>
    </div>
  </nav>
    <!-- End page navigation -->

    <section class="section">
      <div class="container">
        <!-- Begin page content -->
        <div class="content">
          <h1 id="home" class="title">
            <!-- TODO: Change page title -->
            Prototype 3 - Average Response Time per Neighbourhood in Minutes
          </h1>

          <h5>Zhenzhen Wang</h5>

          <h4>Wrangling specific to prototype</h4>
          <p></p>

            <pre style="font-size: 14px; font-family: Dank Mono Regular;">
    Pie Chart:

    Filtered By: Year 2019, Neighborhood not null and Call Type Group not null
    Grouping By: Neighborhood, Call type (implementation only)
    Aggregated By: Response time (Avg)
                   Incident Number (Sum)               
    
    Heatmap:

    Filtered By:   Year 2019, Neighbourhood not null, Call Type Group not null, 
                  Batallion is "B02", and Station is "36"
    Grouping By:   Neighbourhood, and Watch Date
    Aggregated By: Response time (Avg)
                  Incident Number (Sum)
            </pre>

          <h4>Tableau Prototype</h4>

          <img src="midterm_prototype_3.png" alt="prototype3a" width="960">
          <img src="midterm-prototype-3b.png" alt="prototype3b" width="960">
          <br>

          <h4>Conclusion based on the prototype</h4>
          <p>
            The pie chart prototype shows number of incidents in different neighborhoods of San Francisco,
            and the response time from fire station for citizens having different emergency calls.
            From the prototype above, we can see that the Tenderloin, South of Market and Mission  are the 
            neighborhoods having the most number of incidents with all having good response time (below 10 minutes). 
            It also shows that the fire station response time for the average case is around 10 minutes. 
            The neighbourhood with most number of incidents is Tendelorian (45,491 cases) with an average 
            response time of 8.8 min.
          </p>
          <p> 
            The heatmap prototype shows average response time per month of 
            Station "36" for each Neighbourhood which lies under Batallion 
            "B02". From the prototype above, we can say that, the response 
            time for the Financial District in the month of January is above
             the average response time. This is also the case for Potrero 
             Hill for the month of April, May, June, July, September and 
             October. The neighbourhood of Inner Richmond, South of Market,
              Hayes Valley, Tenderloin, and Western Addition all have 
              response time below the average response time.
          </p>
          <br>

          <h4>Feedback From Peer Review </h4>
          <p>
            <table>
              <thead>
                  <tr>
                      <th>Ratings</th>
                      <th>Score</th>
                
                  </tr>
              </thead>
              <tbody>
  
                  <tr>
                      <td>
                        Rate the non-color encodings on a scale of 5 (appropriate for data type, strong visual channels) to 1 (inappropriate for data type, weak visual channels).
                        </td>
                      <td> <font color="green">4.3</font></td>
                      
                  </tr>
  
                  <tr>
                      <td>
                        Rate the lie factor (including misleading context, weak visual encodings, or exaggerated encodings) on a scale of 5 (low lie factor) to 1 (high lie factor).
                        </td>
                        <td> <font color="green">4.3</font></td>
                     
                  </tr>
              </tbody>
          </table>
  
          <table>
            <thead>
                <tr>
                    <th>comments</th>
                </tr>
            </thead>
            <tbody>

                <tr>
                    <td><font color="green">Color scheme should not be diverging because the data it is encoding does not have negative values.</font> I like how the heat map shows some months where the response time is worse than most others and makes that discrepancy clear.
                      <font color="green">It is also hard to tell which label in the pie chart refers to which slice of the pie.</font></td>
                  
                </tr>

                <tr>
                    <td>
                      The number of incidents also can be reliant on population for the neighborhood that battalion serves, so maybe a ratio would be better for lie factor rather than raw count. <font color="green">The labeling for the pie chart is a bit difficult to parse for some of the smaller slices, if that is changed during interactivity to show details as the user hovers over a slice it would help with interpretation.</font> Otherwise, the two charts seem good together and the interactivity seems like it will provide good information.
                      /td>
                    
                </tr>

            </tbody>
            <table>
              <thead>
                  <tr>
                      <th>Changes I made</th>
                  </tr>
              </thead>
              <tbody>
  
                  <tr>
                      <td>The scores I got from feedback are pretty good except color encodeing.
                         After reading Feedback comments from Classmates, 
                         I think it is unnessary for me to have pie char. But 
                         Classmates like my heapmap a lot. Because it not just look nice but also connect with my 
                         another two parters' analysing. I changed the color of the heatmap.

                      </td>
                    
                  </tr>
  
               
  
              </tbody>
        </table>

        <hr>
        <h4>New Tableau Prototype After Feedback</h4>

      
          <img src="HeatMap.png" alt="prototype3b" width="960">

            
          </p>

          <h4>D3 Implementation</h4>
          Average response time in minutes in 2019 for station 36, by Neighborhood and Call type
          <h4><font color="red">(In progress, interactivity and legends will be done 
            very soon)</font></h4>
          <!-- Load d3.js -->
          <script src="https://d3js.org/d3.v5.js"></script>
          <div id="prototype3"></div>
          <script src="javascript/prototype3.js"></script>

        <h4>Data encodeing</h4>
          <p>
            Average of Time to Arrival broken down by Watch Date Month vs.
             Neighborhooods - Analysis Boundaries.  Color shows average of Time to Arrival.  The marks are labeled by average of Time to Arrival. The data is filtered on Call Type Group, Exclusions (On Scene DtTm,Received DtTm), Station Area and Watch Date Year. The Call Type Group filter keeps Alarm, Fire, Non Life-threatening and Potentially Life-Threatening. The Exclusions (On Scene DtTm,Received DtTm) filter keeps 300,288 members. The Station Area filter keeps 36. The Watch Date Year filter keeps 2019. The view is filtered on Neighborhooods - Analysis Boundaries,
             which excludes Inner Richmond and Potrero Hill.
            
          </p>  
          <h4>How to Interract with This Visualization?</h4>
          <p>
            Thig;ja;gj;jh;jhgroeuurout
            
          </p>  
        </p>  
        <h4>Interesting part about This Visualization</h4>
        <p>
          Thig;ja;gj;jh;jhgroeuurout 
        </p>  
        
        
          <h4>How this visualization supports the theme?</h4>
          <p>
            
            Visualizations helps in analysing the number of incidents in different neighbourhoods of San Francisco and the average response time from the fire station after receiving the call.
          </p>

          <h4>Inspirations</h4>
          <p>
            kag;jrgojejge;oah;eh
            
          </p>  



        </div>
      <!-- End page content -->
    </div>
  </section>

  <!-- Page footer -->
  <!-- https://bulma.io/documentation/layout/footer/ -->
  <footer class="footer">
    <div class="content has-text-centered is-size-7" >
      <p>
        <a href="#top">
          <span class="fas fa-arrow-up"></span>
          <span class="has-text-weight-medium">Back to Top</span>
        </a>
      </p>

      <p>
        <!-- TODO: Change to link to your Github repository -->
        <a href="https://github.com/usf-cs360-spring2020/midterm-dataviz" target="_blank" class="button is-small" style="padding-left: 1em; padding-right: 1em;">
          <i class="fab fa-github-alt"></i>&nbsp;<strong>Github</strong>
        </a>

        <a href="https://fontawesome.com/" class="button is-small" style="padding-left: 1em; padding-right: 1em;">
          <i class="fab fa-font-awesome"></i>&nbsp;<strong>FontAwesome</strong>
        </a>

        <a href="https://bulma.io" class="button is-small">
          <img src="https://bulma.io/images/made-with-bulma--semiblack.png" alt="Made with Bulma" width="128" height="24">
        </a>
      </p>
    </div>
  </footer>
  <!-- End page footer -->

  <!-- Mobile menu responsiveness -->
  <!-- https://bulma.io/documentation/components/navbar/ -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

    if ($navbarBurgers.length > 0) {
      $navbarBurgers.forEach( el => {
        el.addEventListener('click', () => {
          const target = el.dataset.target;
          const $target = document.getElementById(target);
          el.classList.toggle('is-active');
          $target.classList.toggle('is-active');
        });
      });
    }
  });
  </script>
  <!-- End mobile menu responsiveness -->
  </body>

</html>
